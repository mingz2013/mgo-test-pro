# 测试方案

## 测试目的

用于验证mongodb，同类型数据，放在一张表，和拆分多个表的性能差异。

如果差异不大，则可放在同一张表里，便于程序逻辑。


## 测试方案
基于现有业务，找出数据量大的表，进行数据模拟，

参考线上业务的并发量，对mongo进行并发请求，

得出一个 总数据量/分表数量/一次请求时间 三维的数据，可画出总数据量和分表数量对于请求响应时间的曲线图，用于观测一个最佳分表状态。




## 具体用于测试的信息

具体用于测试的数据信息，根据目前线上业务来模拟


### 用于测试的库

#### 请求频繁的表:
- user_data
- user_town
- global_monster

#### 数据量大的表:
- user_hero
- user_task
- user_friend

### 模拟数据
- 总数据量，1-5千万的用户, 1千万阶梯
- 分表情况，1，100，10阶梯


### 并发
同时在线最高 1000用户


### 得出的数据
效率
一次请求的时间，阈值，200ms


### 测试的物理环境
由运维同学提供和线上业务相仿的mongo集群环境


10.8.25.119:20000,10.8.27.105:20000,10.8.27.153:20000


## 测试代码
采用Golang编写，便于提高并发量






